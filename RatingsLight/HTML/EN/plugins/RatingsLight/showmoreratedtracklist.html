[% IF wtitle > 0 %]
[% pagetitle = 'PLUGIN_RATINGSLIGHT_MORERATEDTRACKSBYARTIST_LISTHEADER' | string; pagetitle = pagetitle _ " " _ artistname %]
[% ELSE %]
[% pagetitle = 'PLUGIN_RATINGSLIGHT_RATEDTRACKSBYARTIST_LISTHEADER' | string; pagetitle = pagetitle _ " " _ artistname %]
[% END %]
[% PROCESS pageheader.html %]
<style>
@charset "UTF-8";
.playnext_btn {
	float: right;
	background-image: url([% webroot %]plugins/RatingsLight/html/images/btn_playnext.png);
	background-repeat: no-repeat;
	width: 17px;
	height: 17px;
	padding-right: 5px;
}
.append_btn {
	float: right;
	background-image: url([% webroot %]plugins/RatingsLight/html/images/btn_add.gif);
	background-repeat: no-repeat;
	width: 17px;
	height: 17px;
	padding-right: 5px;
}
.play_btn {
	float: right;
	background-image: url([% webroot %]plugins/RatingsLight/html/images/btn_play.gif);
	background-repeat: no-repeat;
	width: 17px;
	height: 17px;
}
.wrapper {
    position: relative;
	padding: 3px;
	margin: -3px;
    width: 100%;
	vertical-align: top;
    transition: all 0.5s;
    -webkit-transition: all 0.5s;
}
.wrapper:hover {
    background:rgba(0,0,0,0.2);
	border-radius: 5px;
    transition: all 0.5s;
    -webkit-transition: all 0.5s;
}
.filler {height: 8px;}
</style>
	[% IF trackcount > 1 %]
	<div class="filler"></div>
	<div class="wrapper"><div>
	<span style="font-family:sans-serif;font-size:12px;">[% "PLUGIN_RATINGSLIGHT_MORERATEDTRACKSBYARTIST_WEBMENU_ALLSONGS" | string %] ([% trackcount %])</span>
	<span class="play_btn" onclick="playallnow();" title="Play now"></span>
	<span class="append_btn" onclick="appendall();" title="Add to the end of the playlist"></span>
	<span class="playnext_btn" onclick="playallnext();" title="Play Next"></span><br><br>
	</div></div>
	[% END %]
	<div class="filler"></div>
	[% FOREACH ratedtrack = moreratedtracks %]
	<div class="wrapper"><div> 
	<span style="font-family:sans-serif;font-size:12px;">[% ratedtrack.tracktitle %]</span>
	<span class="play_btn" onclick="playnow([% ratedtrack.trackid %]);" title="Play now"></span>
	<span class="append_btn" onclick="append([% ratedtrack.trackid %]);" title="Add to the end of the playlist"></span>
	<span class="playnext_btn" onclick="playnext([% ratedtrack.trackid %]);" title="Play Next"></span><br>
	<span style="font-family:sans-serif;font-size:11px;">[% ratedtrack.albumname %]</span>
	</div></div>
	<div class="filler"></div>
    [% END %]

<script TYPE="text/javascript">
	function playnext(trackids) {
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:insert", "track_id:"+trackids],
			   ]
		});
	};
	function append(trackids) {
		console.log(trackids);
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:add", "track_id:"+trackids],
			   ]
		});
	};
	function playnow(trackids) {
		//console.log(trackids);
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:load", "track_id:"+trackids],
			   ]
		});
	};
	function playallnext() {
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:insert", "track_id:[% alltrackids %]"],
			   ]
		});
	};
	function appendall() {
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:add", "track_id:[% alltrackids %]"],
			   ]
		});
	};
	function playallnow() {
		//console.log(trackids);
		ajaxRequest('/jsonrpc.js', {
			   id: 1,
			   method: "slim.request",
			   params: [
					   playerid,
					   ["playlistcontrol","cmd:load", "track_id:[% alltrackids %]"],
			   ]
		});
	};
</script>
[% PROCESS pagefooter.html %]

